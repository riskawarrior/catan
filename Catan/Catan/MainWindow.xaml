<Window x:Class="Catan.MainWindow"
				xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
				xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
				xmlns:View="clr-namespace:Catan.View"
				xmlns:System="clr-namespace:System;assembly=mscorlib"
				xmlns:ViewModel="clr-namespace:Catan.ViewModel"
				Title="Catan - The Game"
				Height="350"
				Width="525">
	<Grid>

		<Border BorderBrush="Black"
						BorderThickness="2">
			<ItemsControl ItemsSource="{Binding GameCells}"
										ClipToBounds="True"
										MinHeight="500">
				<ItemsControl.ItemsPanel>
					<ItemsPanelTemplate>
						<View:GameCanvas Rows="2"
														 Columns="2"
														 IsItemsHost="True" />
					</ItemsPanelTemplate>
				</ItemsControl.ItemsPanel>

				<ItemsControl.ItemContainerStyle>
					<Style TargetType="ContentPresenter">
						<Style.Triggers>
							<Trigger Property="IsMouseOver"
											 Value="True">
								<Setter Property="Panel.ZIndex"
												Value="1000000" />
							</Trigger>
						</Style.Triggers>
					</Style>
				</ItemsControl.ItemContainerStyle>

				<ItemsControl.ItemTemplate>
					<DataTemplate DataType="ViewModel:GameCellContext">
						<Button DataContext="{Binding}"
										Width="80"
										Height="80"
										Command="{Binding SelectCommand}">
							<Button.Style>
								<Style TargetType="Button">
									<Setter Property="Background"
													Value="Red" />
									<!--<Style.Triggers>
										<Trigger Property="IsChecked"
														 Value="True">
											<Setter Property="Background"
															Value="Gray" />
										</Trigger>
									</Style.Triggers>-->
								</Style>
							</Button.Style>
							<Button.Template>
								<ControlTemplate TargetType="Button">
									<View:GameCell Content="{Binding Value}"
																 DataContext="{TemplateBinding DataContext}"
																 Width="{TemplateBinding Width}"
																 Height="{TemplateBinding Height}">
										<View:GameCell.Style>
											<Style TargetType="View:GameCell">
												<Setter Property="Background"
																Value="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=Background}" />
												<Style.Triggers>
													<Trigger Property="IsMouseOver"
																	 Value="True">
														<Setter Property="RenderTransform">
															<Setter.Value>
																<ScaleTransform ScaleX="1.4"
																								ScaleY="1.4"
																								CenterX="40"
																								CenterY="40" />
															</Setter.Value>
														</Setter>
													</Trigger>
												</Style.Triggers>
											</Style>
										</View:GameCell.Style>
									</View:GameCell>
								</ControlTemplate>
							</Button.Template>
						</Button>
					</DataTemplate>
				</ItemsControl.ItemTemplate>
			</ItemsControl>
		</Border>

	</Grid>
</Window>
